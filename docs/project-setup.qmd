---
title: "Project Setup"
subtitle: "Creating standardized CPAL project structures"
---

## Overview

cpaltemplates provides a comprehensive project scaffolding system with 7 functions that help you quickly set up new projects with CPAL branding, consistent structure, and best practices built in.

---

## Quick Start

```r
library(cpaltemplates)

# Create a new data analysis project
start_project(
  name = "dallas-housing-analysis",
  project_type = "analysis",
  features = c("git", "renv", "targets")
)
```

---

## Main Function: `start_project()`

The primary entry point for creating new projects.

### Syntax

```r
start_project(
  name,
  path = ".",
  project_type = c("analysis", "quarto-report", "quarto-slides",
                   "quarto-web", "shiny-dashboard", "shiny-app", "package"),
  interactive = TRUE,
  features = NULL,
  open = TRUE,
  overwrite = FALSE
)
```

### Arguments

| Argument | Description |
|----------|-------------|
| `name` | Project name (will be the folder name) |
| `path` | Parent directory for the project (default: current directory) |
| `project_type` | Type of project to create (see below) |
| `interactive` | If TRUE, guides you through setup with prompts |
| `features` | Vector of features to enable: "renv", "git", "github", "targets", "tests" |
| `open` | If TRUE, opens the new project in RStudio |
| `overwrite` | If TRUE, overwrites existing project |

### Project Types

| Type | Description | Key Files Created |
|------|-------------|-------------------|
| `analysis` | Data analysis with targets pipeline | `_targets.R`, `R/`, `data/`, `output/` |
| `quarto-report` | Branded Quarto report | `report.qmd`, `_brand.yml`, `styles.css` |
| `quarto-slides` | Presentation slides | `slides.qmd`, `_brand.yml` |
| `quarto-web` | Multi-page website | `_quarto.yml`, `index.qmd`, pages |
| `shiny-dashboard` | Full-featured dashboard | `app.R`, `modules/`, `www/`, `_brand.yml` |
| `shiny-app` | Simple Shiny app | `app.R`, `www/`, styles |
| `package` | R package development | `DESCRIPTION`, `R/`, `man/`, tests |

### Examples

```r
# Interactive mode - guides you through options
start_project("my-project", interactive = TRUE)

# Non-interactive with specific options
start_project(
  name = "quarterly-report",
  project_type = "quarto-report",
  features = c("git"),
  interactive = FALSE
)

# Create in specific directory
start_project(
  name = "housing-dashboard",
  path = "~/projects",
  project_type = "shiny-dashboard",
  features = c("git", "renv")
)
```

---

## Adding Components to Existing Projects

These functions add specific components to an existing project without creating a new one.

### `use_quarto_report()`

Add Quarto report capability to an existing project.

```r
use_quarto_report(path = ".", overwrite = FALSE)
```

**Creates:**

- `report.qmd` - Main report template with CPAL styling
- `_brand.yml` - Brand configuration
- `references.bib` - Bibliography template

**Example:**

```r
# Add report to current project
use_quarto_report()

# Add to specific directory
use_quarto_report("my-project/")
```

---

### `use_quarto_slides()`

Add Quarto presentation slides to an existing project.

```r
use_quarto_slides(path = ".", filename = "slides", overwrite = FALSE)
```

**Creates:**

- `{filename}.qmd` - Revealjs presentation template
- `_brand.yml` - Brand configuration

**Example:**

```r
# Add slides with default name
use_quarto_slides()

# Custom filename
use_quarto_slides(filename = "quarterly-presentation")
```

---

### `use_quarto_web()`

Add Quarto website structure to an existing project.

```r
use_quarto_web(path = ".", overwrite = FALSE)
```

**Creates:**

- `_quarto.yml` - Website configuration
- `index.qmd` - Home page
- `about.qmd` - About page template
- `_brand.yml` - Brand configuration
- `styles.css` - Custom styles

**Example:**

```r
# Add website structure
use_quarto_web()
```

---

### `use_shiny_dashboard()`
Add a full-featured Shiny dashboard to an existing project.

```r
use_shiny_dashboard(path = ".", overwrite = FALSE)
```

**Creates:**

- `app.R` - Main application file
- `modules/` - Modular UI/server components
- `www/` - Static assets (CSS, images)
- `_brand.yml` - Brand configuration
- `R/` - Helper functions

**Example:**

```r
# Add dashboard to current project
use_shiny_dashboard()
```

---

### `use_shiny_app()`

Add a simple Shiny application to an existing project.

```r
use_shiny_app(path = ".", overwrite = FALSE)
```

**Creates:**

- `app.R` - Simple Shiny application
- `www/styles.css` - CPAL styling

**Example:**

```r
# Add simple app
use_shiny_app()
```

---

### `use_shiny_theme()`

Add CPAL CSS theme files for Shiny.

```r
use_shiny_theme(path = ".", theme_name = "cpal", overwrite = FALSE)
```

**Creates:**

- `www/{theme_name}.css` - CPAL-styled CSS

**Example:**

```r
# Add default theme
use_shiny_theme()

# Custom theme name
use_shiny_theme(theme_name = "dashboard-theme")
```

---

### `use_targets()`

Add a targets pipeline to an existing project.

```r
use_targets(path = ".", type = c("basic", "analysis", "report"), overwrite = FALSE)
```

| Type | Description |
|------|-------------|
| `basic` | Minimal `_targets.R` setup |
| `analysis` | Full analysis pipeline with data → model → output |
| `report` | Analysis pipeline plus Quarto report rendering |

**Example:**

```r
# Add basic targets
use_targets(type = "basic")

# Full analysis pipeline
use_targets(type = "analysis")
```

---

## Project Structure Examples

### Analysis Project

```
my-analysis/
├── _targets.R          # Pipeline definition
├── R/
│   ├── functions.R     # Analysis functions
│   └── utils.R         # Helper utilities
├── data/
│   ├── raw/            # Original data
│   └── processed/      # Cleaned data
├── output/
│   ├── figures/        # Generated plots
│   └── tables/         # Generated tables
├── _brand.yml          # Brand configuration
├── renv.lock           # Package versions
└── README.md
```

### Shiny Dashboard Project

```
my-dashboard/
├── app.R               # Main application
├── modules/
│   ├── mod_overview.R  # Overview tab module
│   ├── mod_data.R      # Data explorer module
│   └── mod_charts.R    # Charts module
├── R/
│   └── helpers.R       # Utility functions
├── www/
│   ├── styles.css      # Custom styles
│   └── images/         # Logos, icons
├── _brand.yml          # Brand configuration
└── README.md
```

### Quarto Report Project

```
my-report/
├── report.qmd          # Main report
├── _brand.yml          # Brand configuration
├── styles.css          # Custom styles
├── references.bib      # Bibliography
├── data/               # Data files
├── figures/            # Generated figures
└── README.md
```

---

## Feature Options

When using `start_project()`, you can enable various features:

| Feature | Description |
|---------|-------------|
| `git` | Initialize git repository with `.gitignore` |
| `github` | Set up GitHub integration (requires `gh` CLI) |
| `renv` | Initialize renv for package management |
| `targets` | Add targets pipeline for reproducibility |
| `tests` | Set up testthat testing infrastructure |

```r
# Enable all features
start_project(
  "my-project",
  project_type = "analysis",
  features = c("git", "renv", "targets", "tests")
)
```

---

## Best Practices

### 1. Use Interactive Mode for New Projects

```r
# Let the wizard guide you
start_project("my-project", interactive = TRUE)
```

### 2. Start with Analysis, Add Components Later

```r
# Create base project
start_project("research-project", project_type = "analysis")

# Later, add a report
use_quarto_report("research-project/")

# Add slides for presentation
use_quarto_slides("research-project/", filename = "results-presentation")
```

### 3. Always Use Version Control

```r
# Include git from the start
start_project("important-analysis", features = c("git", "renv"))
```

### 4. Use renv for Reproducibility

```r
# Lock package versions
start_project("client-report", features = c("renv"))
```

---

## Troubleshooting

### Project Already Exists

```r
# Use overwrite to replace
start_project("existing-project", overwrite = TRUE)
```

### RStudio Doesn't Open Project

```r
# Disable auto-open
start_project("my-project", open = FALSE)

# Open manually later
rstudioapi::openProject("my-project")
```

### Missing Templates

If templates aren't copying correctly:

```r
# Check package installation
packageVersion("cpaltemplates")

# Reinstall if needed
remotes::install_github("childpovertyactionlab/cpaltemplates")
```

---

## Next Steps

- [Brand & Assets](brand-assets.qmd) - Managing brand configuration
- [Shiny Dashboards](shiny-dashboards.qmd) - Building dashboards with CPAL theming
- [Workflows](workflow-integration.qmd) - Complete project workflows
