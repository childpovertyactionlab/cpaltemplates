---
title: "Tables"
subtitle: "Interactive data tables with CPAL styling"
---

```{r}
#| label: setup
#| include: false
library(cpaltemplates)
library(dplyr)
```

cpaltemplates provides `cpal_table_reactable()` for creating interactive, searchable tables styled with CPAL branding. Built on the reactable package, these tables are ideal for dashboards, Shiny applications, and web-based data exploration.

**Why Reactable tables?**

- **Bootstrap 5 compatible** - Seamless integration with modern Shiny dashboards and bslib themes
- **Interactive by default** - Built-in search, sort, filter, and pagination
- **Responsive design** - Works well across desktop and mobile devices
- **Accessible** - Keyboard navigation and screen reader support

::: {.callout-tip}
## When to Use Interactive Tables
Reactable tables excel when users need to explore data themselves—searching for specific records, sorting by different columns, or filtering to subsets. For simple data display without interactivity, consider standard markdown tables or kable output.
:::

---

# Built-in CPAL Styling

Tables created with `cpal_table_reactable()` automatically include CPAL branding:

| Element | Styling |
|---------|---------|
| **Header** | Bold text (1.1rem) with 2px teal borders (top and bottom) |
| **Rows** | Subtle teal highlight on hover, compact padding by default |
| **Sorting** | Click headers to sort (arrows hidden for clean look) |
| **Striped rows** | Light gray alternating background (when enabled) |
| **Search input** | Teal border with focus ring |
| **Pagination** | Styled page buttons with active state highlighting |
| **Title/Subtitle** | Consistent typography with CPAL colors |
| **Source footer** | Italicized attribution aligned right |

The styling works automatically in both Quarto documents and Shiny dashboards. In Quarto docs with dark mode enabled, tables automatically adapt their colors for proper contrast.

::: {.callout-note}
## Shiny Integration
In Shiny apps using `cpal_dashboard_theme()`, additional styling is applied through the SCSS theme system for full Bootstrap 5 integration.
:::

---

# Creating Tables

## Basic Table

The simplest usage creates an interactive table with search and pagination enabled by default. Users can click column headers to sort and use the search box to find specific records.

```{r}
#| label: reactable-basic
#| code-fold: false
mtcars |>
  mutate(car = rownames(mtcars)) |>
  select(car, mpg, cyl, hp, wt, qsec) |>
  head(15) |>
  cpal_table_reactable(
    title = "Vehicle Database",
    subtitle = "Sample from mtcars dataset",
    source = "Motor Trend, 1974"
  )
```

---

## Function Reference

```
cpal_table_reactable(
  data,
  title = NULL,
  subtitle = NULL,
  source = NULL,
  highlight_columns = NULL,
  bold_rows = NULL,
  bold_only_rows = NULL,
  data_bar_columns = NULL,
  searchable = TRUE,
  pagination = TRUE,
  page_size = 10,
  sortable = TRUE,
  filterable = FALSE,
  show_page_size_options = TRUE,
  striped = FALSE,
  compact = TRUE,
  ...
)
```

### Core Arguments

| Argument | Description |
|----------|-------------|
| `data` | Data frame to display |
| `title` | Optional table title displayed above the table |
| `subtitle` | Optional subtitle displayed below the title |
| `source` | Optional source attribution displayed in footer |

### Highlighting Arguments

| Argument | Description |
|----------|-------------|
| `highlight_columns` | Column names to apply visual highlighting |
| `bold_rows` | Column name with 1/0 values; 1 triggers highlighted background |
| `bold_only_rows` | Column name with 1/0 values; 1 triggers bold text only |
| `data_bar_columns` | Column names to render as inline data bars |

### Interactive Feature Arguments

| Argument | Default | Description |
|----------|---------|-------------|
| `searchable` | `TRUE` | Enable global search bar |
| `pagination` | `TRUE` | Enable pagination |
| `page_size` | `10` | Rows per page |
| `sortable` | `TRUE` | Enable column sorting |
| `filterable` | `FALSE` | Enable per-column filtering |
| `show_page_size_options` | `TRUE` | Show rows per page selector |
| `striped` | `FALSE` | Enable zebra-striping for rows |
| `compact` | `TRUE` | Use reduced cell padding |

---

# Table Features

## Column Filtering

Enable per-column filters when users need to narrow down data by specific column values. This is especially useful for tables with categorical data like regions, categories, or status fields. Users can filter each column independently while still using the global search.

```{r}
#| label: reactable-filter
#| code-fold: false
mtcars |>
  mutate(car = rownames(mtcars)) |>
  select(car, mpg, cyl, hp, wt) |>
  cpal_table_reactable(
    title = "Filterable Table",
    subtitle = "Use column filters to explore data",
    filterable = TRUE,
    page_size = 10
  )
```

---

## Row Highlighting

Use `bold_rows` to draw attention to specific rows based on a condition. This is useful for flagging records that meet certain criteria—high performers, outliers, or items requiring attention. The column should contain 1/0 values where 1 triggers a highlighted background.

```{r}
#| label: reactable-bold-rows
#| code-fold: false
mtcars |>
  mutate(
    car = rownames(mtcars),
    high_performance = ifelse(hp > 200, 1, 0)
  ) |>
  select(car, mpg, cyl, hp, wt, high_performance) |>
  head(15) |>
  cpal_table_reactable(
    title = "High Performance Vehicles Highlighted",
    subtitle = "Rows with HP > 200 are highlighted",
    bold_rows = "high_performance",
    page_size = 15
  )
```

::: {.callout-note}
The highlighting column (`high_performance` in this example) is displayed in the table. If you want to hide it, you can remove it from the data after the table processes it, or use reactable's column definitions to hide specific columns.
:::

---

## Striped Display

Tables use compact padding by default. Add `striped = TRUE` for zebra-striping to improve readability when scanning across rows in dense tables. Use `compact = FALSE` if you prefer more spacious cell padding.

```{r}
#| label: reactable-striped
#| code-fold: false
mtcars |>
  mutate(car = rownames(mtcars)) |>
  select(car, mpg, cyl, hp, wt, qsec, drat) |>
  head(12) |>
  cpal_table_reactable(
    title = "Striped Table",
    subtitle = "Zebra-striping for improved readability",
    striped = TRUE,
    page_size = 12
  )
```

---

## Pagination Options

Control pagination behavior based on your dataset size. For small datasets (under 15-20 rows), disabling pagination shows all data at once. For large datasets, pagination prevents overwhelming users and improves performance.

```{r}
#| label: reactable-pagination
#| code-fold: false
# Small dataset - no pagination needed
mtcars |>
  mutate(car = rownames(mtcars)) |>
  select(car, mpg, cyl, hp) |>
  head(6) |>
  cpal_table_reactable(
    title = "Small Dataset",
    subtitle = "Pagination disabled for small tables",
    pagination = FALSE,
    searchable = FALSE
  )
```

| Dataset Size | Recommendation |
|--------------|----------------|
| < 15 rows | Disable pagination (`pagination = FALSE`) |
| 15-50 rows | Default pagination with 10-15 rows per page |
| 50-200 rows | Enable filtering (`filterable = TRUE`) |
| 200+ rows | Consider server-side pagination or data aggregation |

---

## Complete Example

Combining multiple features for a comprehensive data exploration table. This example demonstrates filtering, row highlighting, and striped display working together.

```{r}
#| label: complete-example
#| code-fold: false
# Prepare data with highlight column
vehicle_data <- mtcars |>
  mutate(
    car = rownames(mtcars),
    efficiency_flag = ifelse(mpg > 25, 1, 0),
    transmission = ifelse(am == 1, "Manual", "Automatic")
  ) |>
  select(car, transmission, mpg, cyl, hp, wt, efficiency_flag)

vehicle_data |>
  cpal_table_reactable(
    title = "Complete Vehicle Analysis",
    subtitle = "Searchable, filterable table with row highlighting",
    source = "Motor Trend Car Road Tests (1974)",
    bold_rows = "efficiency_flag",
    filterable = TRUE,
    striped = TRUE,
    page_size = 10
  )
```

---

# Use Cases

## When to Use Reactable Tables

| Use Case | Why Reactable Works |
|----------|---------------------|
| **Shiny Dashboards** | Bootstrap 5 compatible, reactive-friendly |
| **Data Exploration** | Search, sort, filter let users find what they need |
| **Large Datasets** | Pagination handles hundreds of rows efficiently |
| **Web Applications** | Responsive design works on all screen sizes |
| **Stakeholder Reports** | Interactive HTML reports users can explore |

## When to Consider Alternatives

| Situation | Better Alternative |
|-----------|-------------------|
| PDF/Print reports | Use `knitr::kable()` or `gt` package |
| Simple 3-5 row tables | Markdown tables |
| Static documentation | `knitr::kable()` with minimal styling |
| Very large datasets (10k+ rows) | Server-side pagination or data aggregation |

---

# Quick Reference

| Parameter | Purpose | Common Values |
|-----------|---------|---------------|
| `title` | Table heading | Any string |
| `subtitle` | Secondary heading | Any string |
| `source` | Data attribution | Any string |
| `filterable` | Column filters | `TRUE` / `FALSE` |
| `searchable` | Global search | `TRUE` / `FALSE` |
| `pagination` | Page through rows | `TRUE` / `FALSE` |
| `page_size` | Rows per page | `10`, `15`, `25`, `50` |
| `striped` | Zebra rows | `TRUE` / `FALSE` |
| `compact` | Dense padding | `TRUE` / `FALSE` |
| `bold_rows` | Highlight rows | Column name with 1/0 |

---

## Next Steps

- [Shiny Dashboards](shiny-dashboards.qmd) - Using tables in dashboard layouts
- [Themes & Styling](themes-styling.qmd) - Consistent styling across visualizations
- [Colors & Palettes](colors-palettes.qmd) - CPAL color system
