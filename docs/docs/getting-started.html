<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Getting Started with cpaltemplates â€“ cpaltemplates</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">cpaltemplates</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./getting-started.html" aria-current="page"> 
<span class="menu-text">Get Started</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-functions" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Functions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-functions">    
        <li>
    <a class="dropdown-item" href="./colors-palettes.html">
 <span class="dropdown-text">Colors &amp; Palettes</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./themes-styling.html">
 <span class="dropdown-text">Themes &amp; Styling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./plots-visualizations.html">
 <span class="dropdown-text">Plots &amp; Visualizations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tables-gt.html">
 <span class="dropdown-text">Tables &amp; Styling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./interactive-features.html">
 <span class="dropdown-text">Interactive Features</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./project-setup.html">
 <span class="dropdown-text">Project Setup</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./utilities-helpers.html">
 <span class="dropdown-text">Utilities &amp; Helpers</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./workflow-integration.html"> 
<span class="menu-text">Workflows</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./troubleshooting.html"> 
<span class="menu-text">Troubleshooting</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-use-cpaltemplates" id="toc-why-use-cpaltemplates" class="nav-link active" data-scroll-target="#why-use-cpaltemplates">Why Use cpaltemplates?</a>
  <ul class="collapse">
  <li><a href="#the-problem-cpaltemplates-solves" id="toc-the-problem-cpaltemplates-solves" class="nav-link" data-scroll-target="#the-problem-cpaltemplates-solves"><strong>The Problem cpaltemplates Solves</strong></a></li>
  <li><a href="#when-to-use-cpaltemplates" id="toc-when-to-use-cpaltemplates" class="nav-link" data-scroll-target="#when-to-use-cpaltemplates"><strong>When to Use cpaltemplates</strong></a></li>
  </ul></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a>
  <ul class="collapse">
  <li><a href="#install-the-package" id="toc-install-the-package" class="nav-link" data-scroll-target="#install-the-package">Install the Package</a></li>
  <li><a href="#verify-installation" id="toc-verify-installation" class="nav-link" data-scroll-target="#verify-installation">Verify Installation</a></li>
  </ul></li>
  <li><a href="#essential-setup" id="toc-essential-setup" class="nav-link" data-scroll-target="#essential-setup">Essential Setup</a>
  <ul class="collapse">
  <li><a href="#set-up-google-fonts" id="toc-set-up-google-fonts" class="nav-link" data-scroll-target="#set-up-google-fonts">1. Set Up Google Fonts</a></li>
  <li><a href="#view-available-resources" id="toc-view-available-resources" class="nav-link" data-scroll-target="#view-available-resources">2. View Available Resources</a></li>
  </ul></li>
  <li><a href="#your-first-cpal-styled-plot" id="toc-your-first-cpal-styled-plot" class="nav-link" data-scroll-target="#your-first-cpal-styled-plot">Your First CPAL-Styled Plot</a></li>
  <li><a href="#starting-a-new-project" id="toc-starting-a-new-project" class="nav-link" data-scroll-target="#starting-a-new-project">Starting a New Project</a>
  <ul class="collapse">
  <li><a href="#why-use-cpaltemplates-for-project-setup" id="toc-why-use-cpaltemplates-for-project-setup" class="nav-link" data-scroll-target="#why-use-cpaltemplates-for-project-setup">Why Use cpaltemplates for Project Setup?</a></li>
  <li><a href="#interactive-project-setup" id="toc-interactive-project-setup" class="nav-link" data-scroll-target="#interactive-project-setup">Interactive Project Setup</a></li>
  <li><a href="#direct-project-creation" id="toc-direct-project-creation" class="nav-link" data-scroll-target="#direct-project-creation">Direct Project Creation</a></li>
  <li><a href="#available-project-types" id="toc-available-project-types" class="nav-link" data-scroll-target="#available-project-types">Available Project Types</a></li>
  <li><a href="#available-features" id="toc-available-features" class="nav-link" data-scroll-target="#available-features">Available Features</a></li>
  </ul></li>
  <li><a href="#essential-workflow-functions" id="toc-essential-workflow-functions" class="nav-link" data-scroll-target="#essential-workflow-functions">Essential Workflow Functions</a>
  <ul class="collapse">
  <li><a href="#color-and-styling" id="toc-color-and-styling" class="nav-link" data-scroll-target="#color-and-styling">Color and Styling</a></li>
  <li><a href="#themes-for-different-outputs" id="toc-themes-for-different-outputs" class="nav-link" data-scroll-target="#themes-for-different-outputs">Themes for Different Outputs</a></li>
  <li><a href="#saving-plots" id="toc-saving-plots" class="nav-link" data-scroll-target="#saving-plots">Saving Plots</a></li>
  </ul></li>
  <li><a href="#adding-templates-to-existing-projects" id="toc-adding-templates-to-existing-projects" class="nav-link" data-scroll-target="#adding-templates-to-existing-projects">Adding Templates to Existing Projects</a></li>
  <li><a href="#common-workflows" id="toc-common-workflows" class="nav-link" data-scroll-target="#common-workflows">Common Workflows</a>
  <ul class="collapse">
  <li><a href="#basic-data-visualization-workflow" id="toc-basic-data-visualization-workflow" class="nav-link" data-scroll-target="#basic-data-visualization-workflow">Basic Data Visualization Workflow</a></li>
  <li><a href="#report-generation-workflow" id="toc-report-generation-workflow" class="nav-link" data-scroll-target="#report-generation-workflow">Report Generation Workflow</a></li>
  </ul></li>
  <li><a href="#troubleshooting-common-issues" id="toc-troubleshooting-common-issues" class="nav-link" data-scroll-target="#troubleshooting-common-issues">Troubleshooting Common Issues</a>
  <ul class="collapse">
  <li><a href="#font-issues" id="toc-font-issues" class="nav-link" data-scroll-target="#font-issues">Font Issues</a></li>
  <li><a href="#color-palette-issues" id="toc-color-palette-issues" class="nav-link" data-scroll-target="#color-palette-issues">Color Palette Issues</a></li>
  <li><a href="#project-creation-issues" id="toc-project-creation-issues" class="nav-link" data-scroll-target="#project-creation-issues">Project Creation Issues</a></li>
  </ul></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps">Next Steps</a></li>
  <li><a href="#quick-reference" id="toc-quick-reference" class="nav-link" data-scroll-target="#quick-reference">Quick Reference</a>
  <ul class="collapse">
  <li><a href="#most-important-functions" id="toc-most-important-functions" class="nav-link" data-scroll-target="#most-important-functions">Most Important Functions</a></li>
  <li><a href="#getting-help" id="toc-getting-help" class="nav-link" data-scroll-target="#getting-help">Getting Help</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Getting Started with cpaltemplates</h1>
<p class="subtitle lead">Essential setup and first steps for CPAL data team workflows</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="why-use-cpaltemplates" class="level2">
<h2 class="anchored" data-anchor-id="why-use-cpaltemplates">Why Use cpaltemplates?</h2>
<p>Before diving into installation, itâ€™s helpful to understand <strong>why</strong> cpaltemplates exists and <strong>when</strong> you should use it:</p>
<section id="the-problem-cpaltemplates-solves" class="level3">
<h3 class="anchored" data-anchor-id="the-problem-cpaltemplates-solves"><strong>The Problem cpaltemplates Solves</strong></h3>
<p><strong>Without cpaltemplates</strong>, CPAL data team members often face: - <strong>Inconsistent visual branding</strong> across reports, presentations, and dashboards - <strong>Repetitive setup tasks</strong> when starting new analysis projects - <strong>Time spent on styling</strong> instead of focusing on analysis and insights - <strong>Difficulty onboarding new team members</strong> to CPALâ€™s preferred workflows and standards - <strong>Inconsistent project structures</strong> making collaboration and handoffs challenging</p>
<p><strong>With cpaltemplates</strong>, you get: - <strong>Instant CPAL branding</strong> with consistent colors, fonts, and themes - <strong>Automated project setup</strong> with modern R best practices built-in - <strong>Standardized workflows</strong> that make team collaboration seamless - <strong>Professional-quality outputs</strong> with minimal setup time</p>
</section>
<section id="when-to-use-cpaltemplates" class="level3">
<h3 class="anchored" data-anchor-id="when-to-use-cpaltemplates"><strong>When to Use cpaltemplates</strong></h3>
<table class="caption-top table">
<colgroup>
<col style="width: 56%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Use cpaltemplates when youâ€¦</strong></th>
<th><strong>Skip it when youâ€¦</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Create visualizations for CPAL reports, presentations, or external sharing</td>
<td>Are doing quick, internal exploratory analysis with no sharing</td>
</tr>
<tr class="even">
<td>Start any new data analysis or reporting project</td>
<td>Are working on non-CPAL projects or personal work</td>
</tr>
<tr class="odd">
<td>Want consistent branding across your work</td>
<td>Need completely custom styling that conflicts with CPAL standards</td>
</tr>
<tr class="even">
<td>Collaborate with other CPAL data team members</td>
<td>Are prototyping ideas where appearance doesnâ€™t matter</td>
</tr>
<tr class="odd">
<td>Create dashboards or interactive visualizations</td>
<td>Are working with existing projects that already have established styling</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<section id="install-the-package" class="level3">
<h3 class="anchored" data-anchor-id="install-the-package">Install the Package</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install from GitHub (adjust method based on your setup)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github("childpovertyactionlab/cpaltemplates")</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Or if using renv in your project:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># renv::install("childpovertyactionlab/cpaltemplates")</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cpaltemplates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Why these installation methods?</strong> - <strong>GitHub installation</strong> ensures you get the latest version with newest features - <strong>renv integration</strong> maintains package version consistency across team projects and prevents dependency conflicts</p>
</section>
<section id="verify-installation" class="level3">
<h3 class="anchored" data-anchor-id="verify-installation">Verify Installation</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that key functions are available</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">"cpaltemplates"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] '1.7.0'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test basic functionality</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_cpal</span>()  <span class="co"># Should return a ggplot2 theme object</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in theme_cpal(): could not find function "theme_cpal"</code></pre>
</div>
</div>
<p><strong>What this verification does:</strong> Confirms that cpaltemplates is properly installed and that its core theming functionality integrates correctly with ggplot2, which is essential for all CPAL data visualizations.</p>
</section>
</section>
<section id="essential-setup" class="level2">
<h2 class="anchored" data-anchor-id="essential-setup">Essential Setup</h2>
<section id="set-up-google-fonts" class="level3">
<h3 class="anchored" data-anchor-id="set-up-google-fonts">1. Set Up Google Fonts</h3>
<p><strong>Why fonts matter:</strong> Typography is a crucial part of CPALâ€™s visual identity. Using consistent, professional fonts across all outputs creates cohesive branding and improves readability. Without proper font setup, your plots will fall back to system defaults, which vary by computer and may not match CPAL standards.</p>
<p><strong>When to run this:</strong> Execute once per R session, typically at the start of your analysis. If you restart R, youâ€™ll need to run it again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download and register CPAL fonts</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setup_cpal_google_fonts</span>()</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># This will:</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Download Inter and Roboto from Google Fonts</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># - Register them for use in plots</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># - Set up fallbacks for cross-platform compatibility</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>What happens behind the scenes:</strong> - <strong>Inter font</strong> becomes the default for all text elements (clean, modern sans-serif) - <strong>Roboto font</strong> provides fallback options and specialized use cases - <strong>Cross-platform compatibility</strong> ensures fonts work on Windows, Mac, and Linux - <strong>Caching</strong> means fonts are downloaded once and reused</p>
<p><strong>Troubleshooting:</strong> If fonts donâ€™t appear to work, itâ€™s usually due to system permissions or network restrictions. The function includes automatic fallbacks to system fonts that are visually similar.</p>
</section>
<section id="view-available-resources" class="level3">
<h3 class="anchored" data-anchor-id="view-available-resources">2. View Available Resources</h3>
<p><strong>Why explore first:</strong> Understanding whatâ€™s available helps you make informed choices about colors, themes, and styling options. This prevents the common problem of creating a visualization, then discovering there was a better palette or theme option available.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># See all color palettes</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">view_cpal_palettes</span>(<span class="st">"all"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in view_cpal_palettes("all"): could not find function "view_cpal_palettes"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View a specific palette interactively</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quick_palette</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in quick_palette(): could not find function "quick_palette"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check available themes</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">formals</span>(theme_cpal))  <span class="co"># See theme parameters</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'theme_cpal' not found</code></pre>
</div>
</div>
<p><strong>What these functions show you:</strong> - <strong><code>view_cpal_palettes()</code></strong> displays every color palette side-by-side, helping you choose the right one for your data type and message . - <strong><code>quick_palette()</code></strong> opens an interactive interface to explore individual palettes, see color codes, and test accessibility. - <strong>Theme parameters</strong> show you all the customization options available for fine-tuning your visualizations.</p>
</section>
</section>
<section id="your-first-cpal-styled-plot" class="level2">
<h2 class="anchored" data-anchor-id="your-first-cpal-styled-plot">Your First CPAL-Styled Plot</h2>
<p><strong>Why start with a complete example:</strong> Seeing immediate results builds confidence and demonstrates the value of cpaltemplates. This example incorporates the most commonly used functions and produces a professional-quality output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cpaltemplates)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure fonts are set up</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">setup_cpal_google_fonts</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Setting up CPAL Google Fonts...
Setting up fonts for regular plots...
   Inter downloaded and registered
   Roboto downloaded and registered
   Showtext enabled for regular plots
Setting up fonts for interactive plots...
   Inter registered for interactive plots
   Roboto registered for interactive plots
CPAL Google Fonts setup complete!
   Primary: Inter | Secondary: Roboto</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a sample plot</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_cpal</span>(<span class="at">palette =</span> <span class="st">"main"</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cpal</span>() <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Vehicle Weight vs Fuel Efficiency"</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Grouped by number of cylinders"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Weight (1000 lbs)"</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Miles per Gallon"</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Cylinders"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data: mtcars dataset"</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="getting-started_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save with CPAL standards</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save_cpal_plot</span>(p, <span class="st">"my_first_cpal_plot.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Breaking down what each piece does:</strong></p>
<ul>
<li><p><strong><code>scale_color_cpal(palette = "main")</code></strong>: Applies CPALâ€™s primary color palette to the points. This ensures your categorical variables use colors that are visually distinct, accessible to colorblind users, and consistent with CPAL branding.</p></li>
<li><p><strong><code>theme_cpal()</code></strong>: Transforms the overall appearance to match CPAL standards - adjusts fonts, grid lines, background, spacing, and text sizes for professional presentation quality.</p></li>
<li><p><strong><code>save_cpal_plot()</code></strong>: Saves your plot with standardized dimensions, resolution, and file settings that work well for reports, presentations, and web use. No need to remember optimal DPI or size settings.</p></li>
</ul>
<p><strong>When to use this approach:</strong> This pattern works for most CPAL visualizations. Use it as your default starting point, then customize as needed for specific requirements.</p>
</section>
<section id="starting-a-new-project" class="level2">
<h2 class="anchored" data-anchor-id="starting-a-new-project">Starting a New Project</h2>
<section id="why-use-cpaltemplates-for-project-setup" class="level3">
<h3 class="anchored" data-anchor-id="why-use-cpaltemplates-for-project-setup">Why Use cpaltemplates for Project Setup?</h3>
<p><strong>The traditional approach</strong> to starting a new R project often involves: - Creating a folder manually - Setting up an RStudio project file - Creating a basic folder structure - Configuring version control - Setting up package management - Writing boilerplate code for common tasks</p>
<p><strong>This can take 30-60 minutes</strong> and often results in inconsistent structures across team members.</p>
<p><strong>cpaltemplates automates this</strong> into a 2-3 minute process with CPAL-optimized defaults, ensuring every team member starts with the same professional foundation.</p>
</section>
<section id="interactive-project-setup" class="level3">
<h3 class="anchored" data-anchor-id="interactive-project-setup">Interactive Project Setup</h3>
<p><strong>When to use:</strong> When youâ€™re not sure exactly what you need, want to be guided through options, or are new to project setup.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This will guide you through project setup with prompts</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">start_project</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The interactive setup will ask you about: - <strong>Project name and location</strong>: Where to create your project folder - <strong>Project type</strong>: Analysis, Quarto report, Shiny app, etc. (see table below) - <strong>Features to include</strong>: Git, renv, targets, etc. (see table below)<br>
- <strong>Whether to open in RStudio</strong>: Automatically switches to your new project</p>
<p><strong>Benefits of interactive mode:</strong> - <strong>Prevents mistakes</strong>: Guides you through decisions with explanations - <strong>Educational</strong>: Shows you what options exist and why you might choose them - <strong>Flexible</strong>: You can select exactly what you need for this specific project</p>
</section>
<section id="direct-project-creation" class="level3">
<h3 class="anchored" data-anchor-id="direct-project-creation">Direct Project Creation</h3>
<p><strong>When to use:</strong> When you know exactly what you want and want to create projects quickly, especially for similar types of work.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an analysis project with modern workflow tools</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">start_project</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"my-analysis-project"</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"~/projects"</span>,  <span class="co"># Adjust to your preferred location</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">project_type =</span> <span class="st">"analysis"</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">features =</span> <span class="fu">c</span>(<span class="st">"renv"</span>, <span class="st">"git"</span>, <span class="st">"targets"</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">interactive =</span> <span class="cn">FALSE</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">open =</span> <span class="cn">TRUE</span>  <span class="co"># Opens in RStudio when complete</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Why these specific choices:</strong> - <strong><code>project_type = "analysis"</code></strong>: Sets up folder structure optimized for data analysis with scripts, data folders, and output directories - <strong><code>features = c("renv", "git", "targets")</code></strong>: - <strong>renv</strong>: Ensures package versions are consistent and reproducible - <strong>git</strong>: Sets up version control for tracking changes and collaboration - <strong>targets</strong>: Makes complex analyses reproducible and efficient with workflow automation - <strong><code>interactive = FALSE</code></strong>: Skips prompts and uses your specified settings - <strong><code>open = TRUE</code></strong>: Automatically opens the new project in RStudio</p>
</section>
<section id="available-project-types" class="level3">
<h3 class="anchored" data-anchor-id="available-project-types">Available Project Types</h3>
<p><strong>Choosing the right project type</strong> sets up the appropriate folder structure, templates, and configuration for your specific use case:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Project Type</th>
<th>Description</th>
<th>Best For</th>
<th>What You Get</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"analysis"</code></td>
<td>Data analysis with R scripts and notebooks</td>
<td>Exploratory analysis, research projects, one-off investigations</td>
<td>Scripts folder, data folder, outputs folder, analysis templates</td>
</tr>
<tr class="even">
<td><code>"quarto-report"</code></td>
<td>Quarto document with CPAL styling</td>
<td>Reports for stakeholders, research publications, formal documentation</td>
<td>Quarto templates, CPAL CSS styling, bibliography setup, assets folder</td>
</tr>
<tr class="odd">
<td><code>"quarto-slides"</code></td>
<td>Quarto presentation slides</td>
<td>Presentations, workshops, conference talks</td>
<td>Slide templates with CPAL branding, speaker notes, embedded plots</td>
</tr>
<tr class="even">
<td><code>"shiny-dashboard"</code></td>
<td>Shiny dashboard with CPAL theming</td>
<td>Interactive dashboards for ongoing monitoring, executive summaries</td>
<td>Dashboard templates, CPAL UI theme, layout components</td>
</tr>
<tr class="odd">
<td><code>"shiny-app"</code></td>
<td>Shiny application</td>
<td>Interactive applications, data exploration tools, calculators</td>
<td>App structure, CPAL styling, deployment configuration</td>
</tr>
<tr class="even">
<td><code>"package"</code></td>
<td>R package development</td>
<td>Creating reusable functions, internal tools, sharing code</td>
<td>Package skeleton, documentation setup, testing framework</td>
</tr>
</tbody>
</table>
</section>
<section id="available-features" class="level3">
<h3 class="anchored" data-anchor-id="available-features">Available Features</h3>
<p><strong>Features add functionality</strong> to any project type. Choose based on your projectâ€™s complexity and collaboration needs:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 26%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th>Description</th>
<th>Recommended For</th>
<th>What It Adds</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"renv"</code></td>
<td>Package management with renv</td>
<td><strong>All projects</strong> - ensures reproducibility</td>
<td>Lockfile, isolated package library, consistent versions across team</td>
</tr>
<tr class="even">
<td><code>"git"</code></td>
<td>Git version control setup</td>
<td><strong>All collaborative projects</strong></td>
<td>Git repository, .gitignore, initial commit, README</td>
</tr>
<tr class="odd">
<td><code>"github"</code></td>
<td>GitHub repository creation</td>
<td>Projects shared outside your computer</td>
<td>Automatic GitHub repo creation, remote connection</td>
</tr>
<tr class="even">
<td><code>"targets"</code></td>
<td>targets pipeline for reproducibility</td>
<td><strong>Complex analyses</strong> with multiple steps</td>
<td>Workflow automation, dependency tracking, caching</td>
</tr>
<tr class="odd">
<td><code>"tests"</code></td>
<td>Testing infrastructure</td>
<td><strong>Package development</strong>, functions youâ€™ll reuse</td>
<td>Testing framework, example tests, continuous integration setup</td>
</tr>
</tbody>
</table>
<p><strong>Common feature combinations:</strong> - <strong>Simple analysis</strong>: <code>c("renv", "git")</code> - Version control and package management - <strong>Team project</strong>: <code>c("renv", "git", "github")</code> - Add sharing via GitHub<br>
- <strong>Complex analysis</strong>: <code>c("renv", "git", "targets")</code> - Add workflow automation - <strong>Package development</strong>: <code>c("renv", "git", "tests")</code> - Add testing framework</p>
</section>
</section>
<section id="essential-workflow-functions" class="level2">
<h2 class="anchored" data-anchor-id="essential-workflow-functions">Essential Workflow Functions</h2>
<section id="color-and-styling" class="level3">
<h3 class="anchored" data-anchor-id="color-and-styling">Color and Styling</h3>
<p><strong>Why color choice matters:</strong> Different types of data require different color approaches. Using the wrong palette can make your data harder to understand or even misleading.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use CPAL color palettes in your plots</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_cpal</span>(<span class="at">palette =</span> <span class="st">"main"</span>)      <span class="co"># For color aesthetics</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_fill_cpal</span>(<span class="at">palette =</span> <span class="st">"sequential"</span>) <span class="co"># For fill aesthetics</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Choosing the right palette:</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Palette Type</th>
<th>When to Use</th>
<th>Example Data</th>
<th>Visual Effect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>"main"</code></td>
<td><strong>Categorical data</strong> with no inherent order</td>
<td>Different departments, product categories, survey responses</td>
<td>Visually distinct colors that donâ€™t imply ranking</td>
</tr>
<tr class="even">
<td><code>"sequential"</code></td>
<td><strong>Continuous data</strong> that goes from low to high</td>
<td>Population counts, percentages, ages, income</td>
<td>Light to dark progression shows magnitude</td>
</tr>
<tr class="odd">
<td><code>"diverging"</code></td>
<td><strong>Data with a meaningful center point</strong></td>
<td>Change from baseline, survey agreement scales, temperature anomalies</td>
<td>Distinct colors for above/below center</td>
</tr>
<tr class="even">
<td><code>"categorical"</code></td>
<td><strong>Many categories</strong> (more than main palette)</td>
<td>States, school districts, detailed classifications</td>
<td>Extended set of distinct colors</td>
</tr>
</tbody>
</table>
<p><strong>Common mistakes to avoid:</strong> - Using sequential palettes for categorical data (implies false ranking) - Using categorical palettes for continuous data (loses magnitude information) - Using too many categories with categorical palettes (becomes hard to distinguish)</p>
</section>
<section id="themes-for-different-outputs" class="level3">
<h3 class="anchored" data-anchor-id="themes-for-different-outputs">Themes for Different Outputs</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose the right theme for your output:</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_cpal</span>()          <span class="co"># Default theme for reports</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_cpal_minimal</span>()  <span class="co"># Clean theme with minimal elements</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_cpal_print</span>()    <span class="co"># Optimized for printing</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_cpal_web</span>()      <span class="co"># Optimized for web display</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_cpal_dark</span>()     <span class="co"># Dark theme variant</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_cpal_map</span>()      <span class="co"># Specialized for maps</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="saving-plots" class="level3">
<h3 class="anchored" data-anchor-id="saving-plots">Saving Plots</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save with standard CPAL dimensions and settings</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save_cpal_plot</span>(plot_object, <span class="st">"filename.png"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Available size presets:</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save_cpal_plot</span>(p, <span class="st">"plot.png"</span>, <span class="at">size =</span> <span class="st">"default"</span>)  <span class="co"># 8x6 inches</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">save_cpal_plot</span>(p, <span class="st">"plot.png"</span>, <span class="at">size =</span> <span class="st">"slide"</span>)    <span class="co"># 10x7.5 inches  </span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="fu">save_cpal_plot</span>(p, <span class="st">"plot.png"</span>, <span class="at">size =</span> <span class="st">"half"</span>)     <span class="co"># 6x4 inches</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="fu">save_cpal_plot</span>(p, <span class="st">"plot.png"</span>, <span class="at">size =</span> <span class="st">"third"</span>)    <span class="co"># 4x3 inches</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom dimensions:</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="fu">save_cpal_plot</span>(p, <span class="st">"plot.png"</span>, <span class="at">size =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">8</span>))   <span class="co"># width, height in inches</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="adding-templates-to-existing-projects" class="level2">
<h2 class="anchored" data-anchor-id="adding-templates-to-existing-projects">Adding Templates to Existing Projects</h2>
<p>If you already have a project and want to add CPAL templates:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Quarto reporting capability</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">use_quarto_report</span>()</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Shiny dashboard templates</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">use_shiny_dashboard</span>()</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add targets pipeline</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">use_targets</span>()</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Update CPAL assets (logos, CSS, etc.)</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="fu">update_cpal_assets</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="common-workflows" class="level2">
<h2 class="anchored" data-anchor-id="common-workflows">Common Workflows</h2>
<section id="basic-data-visualization-workflow" class="level3">
<h3 class="anchored" data-anchor-id="basic-data-visualization-workflow">Basic Data Visualization Workflow</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cpaltemplates)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Set up fonts</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">setup_cpal_google_fonts</span>()</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Create your plot</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>plot <span class="ot">&lt;-</span> your_data <span class="sc">|&gt;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable1, <span class="at">y =</span> variable2)) <span class="sc">+</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_cpal</span>() <span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cpal</span>() <span class="sc">+</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Your Title"</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Save with CPAL standards</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="fu">save_cpal_plot</span>(plot, <span class="st">"analysis_plot.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="report-generation-workflow" class="level3">
<h3 class="anchored" data-anchor-id="report-generation-workflow">Report Generation Workflow</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Start a Quarto report project</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">start_project</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">"quarterly-report"</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">project_type =</span> <span class="st">"quarto-report"</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">features =</span> <span class="fu">c</span>(<span class="st">"renv"</span>, <span class="st">"git"</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Or add reporting to existing project</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">use_quarto_report</span>()</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Use CPAL styling in your Quarto documents</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># (Templates will include proper YAML headers and CSS)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="troubleshooting-common-issues" class="level2">
<h2 class="anchored" data-anchor-id="troubleshooting-common-issues">Troubleshooting Common Issues</h2>
<section id="font-issues" class="level3">
<h3 class="anchored" data-anchor-id="font-issues">Font Issues</h3>
<p>If fonts arenâ€™t displaying correctly:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Force refresh fonts</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setup_cpal_google_fonts</span>(<span class="at">force_refresh =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check what fonts are available</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">get_cpal_font_family</span>()</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Use fallback fonts if needed</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_cpal</span>(<span class="at">base_family =</span> <span class="fu">cpal_font_family_fallback</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="color-palette-issues" class="level3">
<h3 class="anchored" data-anchor-id="color-palette-issues">Color Palette Issues</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View palettes to check they're loading</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">view_cpal_palettes</span>(<span class="st">"all"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check specific palette</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cpal_colors</span>(<span class="st">"main"</span>)  <span class="co"># Should return vector of hex colors</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="project-creation-issues" class="level3">
<h3 class="anchored" data-anchor-id="project-creation-issues">Project Creation Issues</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if you have write permissions to the target directory</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure RStudio is not already open with a project</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Try with overwrite = TRUE if directory exists:</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">start_project</span>(<span class="at">name =</span> <span class="st">"test"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="next-steps" class="level2">
<h2 class="anchored" data-anchor-id="next-steps">Next Steps</h2>
<p>Now that you have the basics:</p>
<ol type="1">
<li><strong>Explore Function Groups</strong>: Check out detailed documentation for:</li>
</ol>
<ul>
<li><a href="./colors-palettes.html">Colors &amp; Palettes</a> - Complete color system</li>
<li><a href="./themes-styling.html">Themes &amp; Styling</a> - All theme variants and customization</li>
<li><a href="./project-setup.html">Project Setup</a> - Advanced project configuration</li>
</ul>
<ol start="2" type="1">
<li><p><strong>See Real Examples</strong>: Visit <a href="./workflow-integration.html">Workflow Integration</a> for complete workflow examples</p></li>
<li><p><strong>Interactive Features</strong>: Learn about interactive plots and maps in <a href="./interactive-features.html">Interactive Features</a></p></li>
</ol>
</section>
<section id="quick-reference" class="level2">
<h2 class="anchored" data-anchor-id="quick-reference">Quick Reference</h2>
<section id="most-important-functions" class="level3">
<h3 class="anchored" data-anchor-id="most-important-functions">Most Important Functions</h3>
<ul>
<li><code>setup_cpal_google_fonts()</code> - Set up fonts (run once per session)</li>
<li><code>start_project()</code> - Create new CPAL project</li>
<li><code>theme_cpal()</code> - Apply CPAL theme to plots</li>
<li><code>scale_color_cpal()</code> / <code>scale_fill_cpal()</code> - Use CPAL colors</li>
<li><code>save_cpal_plot()</code> - Save plots with CPAL standards</li>
<li><code>view_cpal_palettes()</code> - See available colors</li>
</ul>
</section>
<section id="getting-help" class="level3">
<h3 class="anchored" data-anchor-id="getting-help">Getting Help</h3>
<ul>
<li>Use <code>?function_name</code> for detailed help on any function</li>
<li>Check <a href="./troubleshooting.html">Troubleshooting</a> for common issues</li>
<li>Contact CPAL Data Team for support</li>
</ul>
<hr>
<p><em>Ready to start using cpaltemplates in your workflow? Pick a function group from the navigation menu to dive deeper, or jump into <a href="./workflow-integration.html">Workflow Integration</a> for complete examples.</em></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>