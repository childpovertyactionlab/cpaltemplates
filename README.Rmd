---
output: github_document
---

# cpaltemplates

**A modern toolkit for data analysis workflows at the Child Poverty Action Lab**

## Vision

cpaltemplates is evolving from a simple template package into a comprehensive workflow toolkit that helps CPAL's data team work faster, more consistently, and with higher quality outputs. We're building intelligent tools that understand context and automate repetitive tasks while maintaining flexibility for custom analyses.

## What's New in This Approach

Instead of just copying static templates, cpaltemplates now provides:
- 🧠 **Smart workflows** that adapt to your project needs
- 🔄 **Integrated pipelines** using modern R tools like targets and Quarto
- 📊 **Context-aware visualizations** that adjust to different audiences
- ✅ **Built-in quality checks** for data, code, and outputs
- 👥 **Collaboration features** for team projects

## Current Features (v1.6.0)

### ✅ Core Functionality
- **`start_project()`**: Intelligent project initialization
  - Project types: general, shiny, report
  - Modern integrations: renv, git, Quarto
  - Standardized folder structures
  - Team-ready configurations
  - ✅ All content now created from templates

### 📁 Project Templates
- Analysis workflow templates
- Quarto report templates with TeX support
- Shiny app templates (simple and dashboard)
- Documentation templates
- Environment configurations
- ✅ Modular template system in `inst/templates/`

### 🎨 Assets & Branding
- CPAL logos and visual elements
- Color palettes and themes
- Typography standards

### 🛠️ Utility Functions (`use_*`)
- **`use_quarto_report()`** - Add report capability to existing projects
- **`use_quarto_slides()`** - Add presentation templates
- **`use_shiny_app()`** - Add simple Shiny app
- **`use_shiny_dashboard()`** - Add full dashboard with modules
- **`use_targets()`** - Add reproducible pipelines (3 types)
- **`update_cpal_assets()`** - Update branding in existing projects

## Template System Architecture

All project scaffolding is now generated from templates stored in `inst/templates/`, making the package more maintainable and customizable.

### Template Structure

```
inst/templates/
├── analysis/             # Analysis script templates
│   └── analysis_template.R.tpl
├── assets/              # CPAL branding assets
│   └── images/          # Logo and favicon files
├── functions/           # Function templates
│   ├── analysis_functions.R.tpl
│   └── functions.R.tpl
├── modules/             # Shiny module templates
│   └── example_module.R.tpl
├── package/             # R package templates
│   └── DESCRIPTION.tpl
├── report/              # Quarto report templates
│   ├── _quarto.yml.tpl
│   ├── report.qmd.tpl
│   └── tex/             # LaTeX templates
├── shiny/               # Shiny app templates
│   ├── app.R.tpl
│   ├── app_dashboard.R.tpl
│   └── app_simple.R.tpl
├── slides/              # Presentation templates
│   └── slides.qmd.tpl
├── targets/             # Targets pipeline templates
│   ├── targets_analysis.R.tpl
│   ├── targets_basic.R.tpl
│   └── targets_report.R.tpl
├── _tools.json.tpl     # RStudio tools configuration
├── env.tpl             # Environment variables template
├── gitignore.tpl       # Git ignore patterns
├── README.md.tpl       # Project README template
├── rproj.tpl           # RStudio project settings
├── style.css.tpl       # CPAL CSS styles
└── styles.scss         # SCSS source for styles
```

### Adding Custom Templates

To add new templates or modify existing ones:

1. Add your template file to the appropriate directory in `inst/templates/`
2. Use the `.tpl` extension for template files
3. Include placeholders like `{{variable_name}}` for dynamic content
4. Update the relevant function in `R/start_project.R` or `R/utils.R` to use the template

## Installation

```r
# Install from GitHub
# install.packages("devtools")
devtools::install_github("childpovertyactionlab/cpaltemplates")
```

## Quick Start

```r
library(cpaltemplates)

# Start a new analysis project
start_project(
  name = "dallas_education_analysis",
  project_type = "report",
  github = TRUE,
  open = TRUE
)
```

## Development Roadmap

### 🎯 Phase 1: Enhanced Templates & Workflows (Current Priority)

#### Analysis Workflows
- [ ] **Modern analysis templates**
  - [ ] Targets-based pipeline templates
  - [ ] Reproducible analysis workflows
  - [ ] Data validation templates
  - [ ] Model comparison frameworks
- [ ] **Project health checks**
  - [ ] `check_project()` - Verify setup and dependencies
  - [ ] `validate_data()` - Data quality checks
  - [ ] `test_pipeline()` - Pipeline validation

#### Quarto Integration
- [ ] **Enhanced Quarto templates**
  - [ ] Multi-format reports (HTML, PDF, Word)
  - [ ] Parameterized reports
  - [ ] Cross-references and citations
  - [ ] Custom CPAL themes
- [ ] **Quarto workflows**
  - [ ] `use_quarto_report()` - Advanced report setup
  - [ ] `use_quarto_presentation()` - Slide templates
  - [ ] `render_all_formats()` - Multi-output rendering

#### Shiny Applications
- [ ] **Smart Shiny templates**
  - [ ] Dashboard layouts
  - [ ] Data explorer templates
  - [ ] Report generators
  - [ ] Mobile-responsive designs
- [ ] **Shiny utilities**
  - [ ] `use_shiny_dashboard()` - Full dashboard setup
  - [ ] `add_shiny_module()` - Modular components
  - [ ] `deploy_shiny()` - Deployment helpers

### 📊 Phase 2: Modern Data Visualization

#### ggplot2 Enhancement
- [ ] **Smart plotting system**
  - [ ] `cpal_plot()` - Intelligent plot creation
  - [ ] Context-aware theming
  - [ ] Automatic accessibility checks
  - [ ] Multi-format export
- [ ] **Plot types**
  - [ ] Time series with annotations
  - [ ] Comparative visualizations
  - [ ] Geographic maps
  - [ ] Statistical summaries

#### Beyond ggplot2
- [ ] **Interactive visualizations**
  - [ ] Plotly integration
  - [ ] Observable Plot templates
  - [ ] D3.js components
  - [ ] Leaflet map templates
- [ ] **Tables and reports**
  - [ ] `cpal_table()` - Smart table formatting
  - [ ] GT table themes
  - [ ] Interactive tables with reactable
  - [ ] Excel report generation

### 🔧 Phase 3: Workflow Automation

#### Pipeline Management
- [ ] **Targets integration**
  - [ ] Pipeline templates
  - [ ] Caching strategies
  - [ ] Parallel processing
  - [ ] Dependency visualization
- [ ] **Automation tools**
  - [ ] Scheduled reports
  - [ ] Data refresh workflows
  - [ ] Quality monitoring

#### Documentation & Quality
- [ ] **Auto-documentation**
  - [ ] Code documentation
  - [ ] Data dictionaries
  - [ ] Method descriptions
  - [ ] Change logs
- [ ] **Quality assurance**
  - [ ] Unit test templates
  - [ ] Data validation rules
  - [ ] Output verification
  - [ ] Performance monitoring

### 🔌 Phase 4: Data Connections (Future)

#### Connection Management
- [ ] **Database connections**
  - [ ] Secure credential storage
  - [ ] Connection pooling
  - [ ] Query builders
  - [ ] Cache management
- [ ] **API integrations**
  - [ ] Census data access
  - [ ] City data portals
  - [ ] Education databases
  - [ ] Social service APIs

## Example: Modern Workflow

```r
# 1. Create project with advanced features
project <- start_project(
  "quarterly_education_report",
  project_type = "report",
  renv = TRUE,        # Reproducible environments
  github = TRUE       # Version control ready
)

# 2. Set up analysis pipeline (coming soon)
use_targets_pipeline(
  data_sources = c("enrollment", "performance", "demographics"),
  outputs = c("report", "dashboard", "dataset")
)

# 3. Create branded visualizations (coming soon)
cpal_plot(enrollment_data) %>%
  set_type("trend") %>%
  add_context(
    title = "DISD Enrollment Trends",
    subtitle = "Pre-K through 12th Grade",
    source = "TEA PEIMS 2024"
  ) %>%
  annotate_insights() %>%
  export_all_formats()

# 4. Generate multi-format report (coming soon)
render_cpal_report(
  "quarterly_education_report.qmd",
  outputs = c("html", "pdf", "pptx"),
  params = list(quarter = "Q3", year = 2024)
)
```

## Why This Approach?

### 🚀 Immediate Benefits
- **Faster project setup**: Minutes instead of hours
- **Consistent outputs**: Same quality across all projects
- **Better collaboration**: Shared standards and workflows
- **Reduced errors**: Built-in validation and checks

### 🔮 Future-Ready
- **Modern R ecosystem**: Embraces tidyverse, Quarto, targets
- **Scalable workflows**: From simple analyses to complex pipelines
- **Team-oriented**: Built for collaboration from the ground up
- **Continuously improving**: Regular updates based on team needs

## Contributing

We welcome contributions! Priority areas:
1. Template improvements
2. Workflow examples
3. Documentation
4. Bug reports and feature requests

See our [Contributing Guide](CONTRIBUTING.md) for details.

## Getting Help

- 📖 **Documentation**: See package vignettes (coming soon)
- 💬 **Questions**: Contact the CPAL data team
- 🐛 **Issues**: [GitHub Issues](https://github.com/childpovertyactionlab/cpaltemplates/issues)
- 📧 **Email**: datalab@childpovertyactionlab.org


## Changelog

### Version 1.6.1 (Latest)
- ✅ **Template System Overhaul**:
  - All project content now generated from template files
  - Added templates for .Rproj and DESCRIPTION files
  - Removed hardcoded content from `start_project.R`
  - Improved maintainability and customization
- ✅ **New Templates Added**:
  - `inst/templates/rproj.tpl` - RStudio project settings
  - `inst/templates/package/DESCRIPTION.tpl` - Package description template


### Version 1.6.0 (Current)
- **Template System**: All content now generated from templates in `inst/templates/`
- **New Functions**: Added 6 `use_*()` functions for enhancing existing projects
- **Consistency**: Both `start_project()` and `use_*()` functions use same templates
- **Code Cleanup**: Removed ~300 lines of duplicate code
- **Better Structure**: Modern R conventions (R/ instead of scripts/)

### Version 1.5.1
- Initial streamlined version
- Basic `start_project()` function
- Core templates for reports and Shiny apps

## License

GPL-3

## Acknowledgments

- Inspired by [urbntemplates](https://github.com/UrbanInstitute/urbntemplates) from the Urban Institute
- Built by and for the Child Poverty Action Lab data team
- Special thanks to all contributors and users who provide feedback

---

*Building better data workflows for social impact* 🌟

